<div class="container">
  <div class="row">
    <div class="col-md-2 offset-1 mt-5">
      <%= render "layouts/links" %>
    </div>
    <div class="col-md-6 mt-5">
      <div>
        <%= form_with model: @post, local:true do |f| %>
        <div>
          <%= f.attachment_field :image %>
        </div>

        <img id="preview" style="width:512px; height:291px;">　<!-- 画像のプレビュー -->

        <script>
          $('#post_image').on('change', function (e) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $("#preview").attr('src', e.target.result);
            }
            reader.readAsDataURL(e.target.files[0]);
        });
        </script> <!-- ここまで -->

        <div class="form-select">
          <%= f.collection_select :genre_id, @genres, :id, :genre_name, prompt: "選択してください", class: "form-select " %>
        </div>
        <div>
          <%= f.text_area :body, class: "form-control" %>
        </div>
        <div class="d-flex flex-row-reverse">
          <div >
            <%= f.submit "投稿", class: "btn btn-success" %>
          </div>
        </div>
        <% end %>
      </div>
    </div>
    <div class="col-md-3 mt-5">
      <%= render "search/form" %>
    </div>
  </div>
</div>